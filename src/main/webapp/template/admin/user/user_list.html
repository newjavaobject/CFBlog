<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>用户列表</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
		<!--[if lt IE 9]>
    	<script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    	<script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    	<![endif]-->
		<link rel="stylesheet" href="../../js/layui/css/layui.css" />
		<style>
			.layui-form-item {
				margin: 0px;
				width: 200px;
			}
			
			.layui-table-view {
				margin-top: 0px;
			}
		</style>
	</head>

	<body>
		<div class="layui-form-item layui-inline">
			<label class="layui-form-label">用户名</label>
			<div class="layui-input-inline">
				<input type="text" name="username" placeholder="请输入用户名" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-form-item layui-inline">
			<label class="layui-form-label">所属机构</label>
			<div class="layui-input-inline">
				<input type="text" name="jigou" placeholder="请输入机构名称" autocomplete="off" class="layui-input">
			</div>
		</div>
		<button class="layui-btn" data-type="reload">搜索</button>
		<div class="layui-inline" style="width: 500px;"></div>
		<div class="layui-btn-group">
			<button class="layui-btn" id="addUser"><i class="layui-icon">&#xe654;</i>&nbsp;增加</button>
		</div>
		<table class="layui-hide" id="user_table" lay-filter="userTable"></table>
	</body>

	<script src="../../js/jquery-3.3.1.min.js"></script>
	<script src="../../js/layui/layui.all.js"></script>
	<script type="text/html" id="operation">
		<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
		<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
		<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
	</script>
	<script>
		layui.use('table', function() {
			var table = layui.table;

			//展示已知数据
			table.render({
				elem: '#user_table',
				cols: [
					[ //标题栏
						{
							type: 'checkbox'
						},
						{
							field: 'id',
							title: 'ID',
							width: 80,
							sort: true
						}, {
							field: 'username',
							title: '用户名',
							width: 120
						}, {
							field: 'email',
							title: '邮箱',
							minWidth: 150
						}, {
							field: 'sign',
							title: '签名',
							minWidth: 160
						}, {
							field: 'sex',
							title: '性别',
							width: 80
						}, {
							field: 'city',
							title: '城市',
							width: 100
						}, {
							field: 'experience',
							title: '积分',
							width: 80,
							sort: true
						},
						{
							fixed: 'right',
							width: 180,
							align: 'center',
							toolbar: '#operation'
						}
					]
				],
				page: true,
				data: [{
						"id": "10001",
						"username": "杜甫",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "116",
						"ip": "192.168.0.8",
						"logins": "108",
						"joinTime": "2016-10-14"
					}, {
						"id": "10002",
						"username": "李白",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "12",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14",
						"LAY_CHECKED": true
					}, {
						"id": "10003",
						"username": "王勃",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "65",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}, {
						"id": "10004",
						"username": "贤心",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "666",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}, {
						"id": "10005",
						"username": "贤心",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "86",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}, {
						"id": "10006",
						"username": "贤心",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "12",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}, {
						"id": "10007",
						"username": "贤心",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "16",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}, {
						"id": "10008",
						"username": "贤心",
						"email": "xianxin@layui.com",
						"sex": "男",
						"city": "浙江杭州",
						"sign": "人生恰似一场修行",
						"experience": "106",
						"ip": "192.168.0.8",
						"logins": "106",
						"joinTime": "2016-10-14"
					}]
					//,skin: 'line' //表格风格
					,
				even: true
				//,page: true //是否显示分页
				//,limits: [5, 7, 10]
				//,limit: 5 //每页默认显示的数量
			});
			
			//监听工具条
			table.on('tool(userTable)', function(obj) {
				var data = obj.data;
				if(obj.event === 'detail') {
					var win = layer.open({
						'type':2,
						'title':data.username+"详情",
						'content':"user_detail.html",
						'area':['500px', '500px'],
						'btn':'确定',
						'yes':function(index, layero){
							layer.close(win);
						}
					});
				} else if(obj.event === 'del') {
					layer.confirm('确认删除 '+data.username+'？', function(index) {
						//      obj.del();
						layer.alert(data.username+"成功！");
						layer.close(index);
					},function(index){
						layer.alert(data.username+"失败！");
						layer.close(index);
					});
				} else if(obj.event === 'edit') {
					var win = layer.open({
						'type':2,
						'title':data.username+"编辑",
						'content':"user_edit.html",
						'area':['500px', '500px'],
						'btn':'确定',
						'yes':function(index, layero){
							layer.close(win);
						}
					});
				}
			});
		});
		
		$("#addUser").click(function(){
			var win = layer.open({
				'type':2,
				'title':"新增用户",
				'content':"user_add.html",
				'area':['500px', '500px'],
				'btn':'提交',
				'yes':function(index, layero){
					layer.close(win);
				}
			});
		})
	</script>

</html>